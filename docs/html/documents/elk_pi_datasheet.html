
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Overview &#8212; Elk DevKit  documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Blackboard Page" href="blackboard.html" />
    <link rel="prev" title="Examples Overview" href="elk_examples_overview.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="blackboard.html" title="Blackboard Page"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="elk_examples_overview.html" title="Examples Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Elk DevKit  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><img alt="image0" src="../_images/image27.jpg" /></p>
<p><strong>Author:</strong> Elk</p>
<p><strong>Contact:</strong> <a class="reference external" href="mailto:tech&#37;&#52;&#48;elk&#46;audio">tech<span>&#64;</span>elk<span>&#46;</span>audio</a></p>
<p><strong>Revision:</strong> H</p>
<p><strong>Last modification:</strong> 2019-12-02</p>
<p><em>DISCLAIMER</em></p>
<p><strong>Copyright © 2019 Modern Ancient Instruments Networked AB. Modern
Ancient Instruments Networked AB</strong> reserves the right to make changes to
this specification and its products at any time without notice. <strong>Modern
Ancient Instruments Networked AB</strong> assumes no liability arising out of
the application or use of any information, products or services
described herein. Customers are advised to obtain the latest version of
this device specification before relying on any published information
and before placing orders for products. <strong>Modern Ancient Instruments
Networked AB</strong> does not recommend the use of any of its products in
critical applications where the failure or may cause damage to property,
injury or death. Products are not authorized for use in such
applications.</p>
<div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Texas instrument PCM3168 audio codec, 24 Bit, 48 / 96 / 192 kHz</li>
<li>4 fixed analog audio inputs (2.54 mm pitch pin-header)</li>
<li>4 fixed analog audio outputs (2.54 mm pitch pin-header)</li>
<li>Headphone stereo output (3.5 mm Stereo Jack) w/ adjustable volume</li>
<li>Stereo Input jack (3.5 mm Stereo Jack)</li>
<li>2 fixed Control Voltage outputs (2.54 mm pitch pin-header)</li>
<li>2 Gate/Trigger inputs (2.54 mm pitch pin-header)</li>
<li>4 Gate/Trigger output (2.54 mm pitch pin-header)</li>
<li>2 configurable audio/CV inputs (2.54 mm pitch pin-header)</li>
<li>2 configurable audio/CV outputs (2.54 mm pitch pin-header)</li>
<li>16 analog sensor inputs (2.54 mm pitch pin-header)</li>
<li>32 digital inputs (2.54 mm pitch pin-header)</li>
<li>32 digital outputs (2.54 mm pitch pin-header)</li>
<li>5-poles DIN MIDI In/Out (2.54 mm pitch pin-header)</li>
<li>1 I2C interface (2.54 mm pitch pin-header)</li>
</ul>
</div>
<div class="section" id="assembly-content-and-accessories">
<h2>Assembly content and accessories<a class="headerlink" href="#assembly-content-and-accessories" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="4%" />
<col width="16%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Item</strong></td>
<td><strong>Q</strong></td>
<td><strong>Manufacturer, Part Number</strong></td>
<td><strong>Supplier</strong></td>
</tr>
<tr class="row-even"><td>Raspberry Pi Model 3B+</td>
<td>1</td>
<td>/</td>
<td><a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/">Your local distributor</a></td>
</tr>
<tr class="row-odd"><td>Official Rpi Power adapter 5.1V 2.5A microUSB</td>
<td>1</td>
<td>/</td>
<td><a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-universal-power-supply/">Your local distributor</a></td>
</tr>
<tr class="row-even"><td>microSD card 8/16/32 GB</td>
<td>1</td>
<td>/</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Heat Sink for Raspberry Pi CPU</td>
<td>1</td>
<td>Adafruit, 3038</td>
<td><a class="reference external" href="https://www.mouser.se/ProductDetail/Adafruit/3083?qs=sGAEpiMZZMuKfYsiLTIqmKSvFn1Bw19gHz0pRNuazWQ%3D">Mouser</a></td>
</tr>
<tr class="row-even"><td>18 mm m-f spacer</td>
<td>4</td>
<td>M2113-2545-AL</td>
<td>Mouser</td>
</tr>
<tr class="row-odd"><td>5 mm f-f spacers</td>
<td>4</td>
<td>M1252-2545-AL</td>
<td>Mouser</td>
</tr>
<tr class="row-even"><td>M2.5x4 steel screw</td>
<td>4</td>
<td>Keystone 29300</td>
<td>Mouser</td>
</tr>
<tr class="row-odd"><td>Shunt connector 4 pos</td>
<td>5</td>
<td>Samtec, SAM10619-ND</td>
<td>Digikey</td>
</tr>
<tr class="row-even"><td>Jtag-USB cable <a class="footnote-reference" href="#id2" id="id1">[1]</a></td>
<td>1</td>
<td>Digilent</td>
<td><a class="reference external" href="https://store.digilentinc.com/jtag-usb-cable/">Digilent store</a></td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Not needed for developing</td></tr>
</tbody>
</table>
<p>For assembling the board, follow the steps in our guide for <a class="reference external" href="getting_started_with_development_kit_elk_pi_hardware.html">getting started with Elk Pi Hardware.</a></p>
</div>
<div class="section" id="raspberry-pi-guidelines">
<h2>Raspberry Pi guidelines<a class="headerlink" href="#raspberry-pi-guidelines" title="Permalink to this headline">¶</a></h2>
<p>The following guidelines must be followed when using the Raspberry Pi
with the <em>Elk Pi</em> board. We are not responsible for possible damages
caused to your Raspberry Pi computer.</p>
<ul class="simple">
<li>Use the <strong>Raspberry Pi 3 Model B+</strong>.</li>
<li>Use the <a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-universal-power-supply">official RPi power adapter</a> (5.1V, 2.5A),
and follow the power instructions listen in the
section “Power Requirements” of this document.</li>
<li>Apply the heat-sink on the Raspberry Pi CPU to avoid overheating
damages (Figure 1).</li>
<li>Always “cold plug” the Elk Pi board on the Rpi to avoid short
circuits due to a wrong connection (plug the Elk Pi first, then
power on the RPi).</li>
<li>If adopting the alternative PSU method (Page 10) make sure provide
<strong>not more than 5.1V</strong> and make sure to respect the polarity of
J12 (Figure 5).</li>
</ul>
</div>
<div class="section" id="connectors-and-pinout">
<h2>Connectors and pinout<a class="headerlink" href="#connectors-and-pinout" title="Permalink to this headline">¶</a></h2>
<p><em>Figure 5:</em></p>
<p><img alt="image5" src="../_images/image16.jpg" /></p>
<p><em>Figure 6:</em></p>
<p><img alt="image6" src="../_images/image13.jpg" /></p>
</div>
<div class="section" id="status-leds">
<h2>Status LEDs<a class="headerlink" href="#status-leds" title="Permalink to this headline">¶</a></h2>
<p>Two of the Raspberry Pi GPIOS are directly wired to two general purpose
LEDs, labeled on the board as “STATUS”.</p>
<p><a class="reference internal" href="../_images/image28.jpg"><img alt="image7" src="../_images/image28.jpg" style="width: 500px;" /></a></p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="23%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Designator</strong></td>
<td><strong>Color</strong></td>
<td><strong>Raspberry Pi GPIO</strong></td>
</tr>
<tr class="row-even"><td>D1</td>
<td>Red</td>
<td>Pin 32 (BCM 12)</td>
</tr>
<tr class="row-odd"><td>D2</td>
<td>Green</td>
<td>Pin 37 (BCM 26)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="power-requirements">
<h1>Power requirements<a class="headerlink" href="#power-requirements" title="Permalink to this headline">¶</a></h1>
<p>Elk Pi is fully powered from the 5V pin header exposed on the Raspberry
Pi, so <em>no additional power supply is needed other than the Raspberry
Pi’ one</em>. Just plug the Elk Pi board on top of the Raspberry Pi, power
the Raspberry Pi, and the green “ON” LED (D5) will turn on. If this
doesn’t happen, you might be using an incorrect power supply. Otherwise,
the board is likely malfunctioning. Note that you can power the
Raspberry Pi before plugging the Elk Pi onto it, there is no functional
requirement related to this sequence, just make sure that the pins
correctly line up to avoid possible short circuits.</p>
<div class="section" id="recommended-power-supply">
<h2>Recommended Power Supply<a class="headerlink" href="#recommended-power-supply" title="Permalink to this headline">¶</a></h2>
<p>The power supply that you will use to power the Rpi, has to have the
following specifications:</p>
<ul class="simple">
<li>5 VDC</li>
<li>&gt;=2.5 A</li>
<li>Micro USB plug</li>
</ul>
<p>Because of the voltage drop that the power cable usually causes, <strong>we
recommend using the official Raspberry Pi Power Supply available</strong>
<a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-universal-power-supply/">here</a>.
Its 5.1V output and steady 2.5A guarantee proper power conditions for
the Elk Pi. For some power-efficient applications the Elk Pi may work
also if the Raspberry is powered from a less reliable power sources like
phone chargers, USB ports or power-banks, but always try to <strong>avoid
using third-party power sources to minimize possible poor supply
conditions</strong>.</p>
</div>
<div class="section" id="power-consumption">
<h2>Power Consumption<a class="headerlink" href="#power-consumption" title="Permalink to this headline">¶</a></h2>
<p>The power consumption of the Elk Pi board highly depends on the usage of
the board or, in other words, what you connect to it.</p>
<p>Since the Elk Pi and the raspberry Pi share the same 5V source, the
current available for the Elk Pi to use is:</p>
<p><img alt="image101" src="../_images/image101.png" /></p>
<p>It’s reported from many sources (<a class="reference external" href="https://www.pidramble.com/wiki/benchmarks/power-consumption">like this
one</a>)
that the Raspberry Pi can draw at maximum around 1A of current with a
400% CPU stress test, so the Elk Pi will have at least 1.5 A to
function, and this will be enough current in most use cases.</p>
<p>Idle Power consumption on 5V pin (Elk Pi only) = 200 - 300 mA</p>
<p>Idle Power consumption on 5V pin (Elk Pi+Rpi) = 800 - 950 mA</p>
</div>
<div class="section" id="alternative-power-supply">
<h2>Alternative Power Supply<a class="headerlink" href="#alternative-power-supply" title="Permalink to this headline">¶</a></h2>
<p>In the standard configuration, the Elk Pi is taking the power from the
5V pin of the raspberry Pi, which is directly coming from the micro USB
power supply. However, it is also possible to have a different power
configuration, where the power is provided from an external source
through the pins of J12 of the Elk Pi board (refer to Figure 4).</p>
<p>In this case, the Elk Pi is powering the Raspberry Pi through the
external source connected to J12. <strong>Do not use the alternative power
supply (J12) if the Raspberry Pi is powered from its micro USB PSU (and
viceversa).</strong> Only one power source must provide power to the system.
This alternative power method is intended for special use cases where is
not practical to have the default microUSB power supply. The power
requirement is, clearly the same stated previously: 5V, 2.5A.</p>
</div>
</div>
<div class="section" id="audio-cv-configurations">
<h1>Audio/CV configurations<a class="headerlink" href="#audio-cv-configurations" title="Permalink to this headline">¶</a></h1>
<p>One of the Elk Pi main features is its audio/cv configurability. The
board has a total of 6 inputs and 8 output channels. A total of 4
channels, two for the Inputs and two for the outputs, are individually
configurable to work for either CV or Audio signals. <em>Figure 6</em> below
illustrates the possible configurations:</p>
<p><em>Figure 7:</em></p>
<p><img alt="image102" src="../_images/image102.jpg" /></p>
<p>As you can see from <em>Figure 7</em>, there are two mode-switches for the
input and two for the output. The switches are implemented using
standard 2x3 pin headers in combination with a dual jumper connector.
Move the dual jumper connector of the respective header (J7, J8, J10,
J11) as shown in Figure 7 to switch between CV or audio functionality of
the channel. Every header refer to a single channel and when, for
example, the switch is set to “Audio”, the respective CV pin will not be
functioning, so <strong>be sure to match the CV/Audio configuration of your
board, with the actual pins you will be using.</strong> <strong>If the dual jumper is
removed and no electrical connection is made on the header, the channel
will not work at all, you must keep the dual jumper either to select
“Audio” or “CV”.</strong> Finally, make sure that the dual jumper is properly
is oriented with the connections parallel to the long side of the header
(Figure 8).</p>
<p><em>Figure 8:</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first"><a class="reference internal" href="../_images/image22.jpg"><img alt="image9" src="../_images/image22.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>CV Selected</em></div></blockquote>
</td>
<td><p class="first"><a class="reference internal" href="../_images/image23.jpg"><img alt="image10" src="../_images/image23.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>Audio Selected</em></div></blockquote>
</td>
<td><p class="first"><a class="reference internal" href="../_images/image21.jpg"><img alt="image8" src="../_images/image21.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>BAD CONNECTION</em></div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="audio-i-o">
<h1>Audio I/O<a class="headerlink" href="#audio-i-o" title="Permalink to this headline">¶</a></h1>
<p>The board presents a maximum of 6 audio inputs (if J7 and J8 are on
“audio” configuration) and 6 audio outputs (if J10 and J11 are on
“audio” configuration). The first two input channels are high impedance
and fed into a +10 dB preamp for guitar/bass inputs. (check the chapter
“Stereo preamp” for further information)</p>
<table border="1" class="docutils">
<colgroup>
<col width="84%" />
<col width="16%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input Impedance Ch 1,2</td>
<td>1 MΩ</td>
</tr>
<tr class="row-even"><td>Input Impedance Ch 3,4,5,6</td>
<td>122 kΩ</td>
</tr>
<tr class="row-odd"><td>Max Input signal amplitude (all channels, preamp OFF)</td>
<td>5 Vpp</td>
</tr>
<tr class="row-even"><td>Max Input signal amplitude (Ch1, 2 , preamp ON)</td>
<td>1.5 Vpp</td>
</tr>
<tr class="row-odd"><td>Line output Impedance (all channels)</td>
<td>47 Ω</td>
</tr>
<tr class="row-even"><td>Max output voltage (all channels)</td>
<td>4 Vpp</td>
</tr>
</tbody>
</table>
<p>The Codec <a class="reference external" href="http://www.ti.com/lit/ds/symlink/pcm3168a.pdf">Texas Instruments
PCM3168</a>, supports 6
input channels and 8 output channels at 24 bit, at 48kHz. Since the
Raspberry Pi SOC natively supports only 2 channels, a CPLD is introduced
between the Codec and the Raspberry Pi to achieve multi-channel support.</p>
<p><strong>Important Note for “More cowbell” boards</strong> <a class="footnote-reference" href="#id5" id="id3">[2]</a>: Input channel 1 (RING) and 2 (TIP) shall be
accessed through the input stereo Jack J13. If you desire, instead, to
use the pins to connect audio to channel 1 and 2 (pin 11 and pin 12 on
J4), you will need to remove the ground protection introduced from J13
that would be automatically removed once a stereo minijack is used to
provide the signal. To do this, you have two options:</p>
<ol class="arabic simple">
<li>Connect a “dummy” stereo mini jack to J13 (recommended).</li>
<li>Desolder J13.</li>
</ol>
<p>If you use the pins as your input source for channel 1 and/or 2 and
neither of the two options is applied, the channel/s will be muted.</p>
<p><strong>Important Note for “People are strange” boards</strong> <a class="footnote-reference" href="#id5" id="id4">[2]</a>: In this version of the board is to configure the input channels 1 and 2 to receive the signal either from the on board mini jack input (J13) or the pins 11 and 12 on J4. This is done through the solder jumpers SJ1 and SJ2 that you can find on the back side of the board below J13.</p>
<p><em>Figure 9:</em></p>
<p><img alt="sodler_junctions" src="../_images/solder_junctions.jpg" /></p>
<ul class="simple">
<li>To configure the inputs from the pins 11,12 on J4, break the small copper connection between the two pads on SJ1 (Audio input 1) and SJ2 (Audio input 2). You can use a precision knife or a small cutter blade.</li>
<li>To configure the inputs from the Stereo input jack J13, keep the two pads of the solder joints connected</li>
</ul>
<p>If you want to come back to the jack configuration after you cut the two traces you can use a soldering iron to create a small solder blob to restore the connection.</p>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> To understand which version of the board you have, just read the quote on the back of the board.</td></tr>
</tbody>
</table>
<div class="section" id="eurorack-compatibility">
<h2>Eurorack Compatibility<a class="headerlink" href="#eurorack-compatibility" title="Permalink to this headline">¶</a></h2>
<p>The Elk pi board is designed to be interfaceable with the Eurorack world
thanks to its CV and Gate capabilities. However, the audio levels are
not directly compatible with the Eurorack standards. Audio signals
coming from a Eurorack system, can be very loud (typically 10 Vpp), so
make sure that all the inputs signals are brought to line level (max
5Vpp) before feeding them to the Elk Pi. <strong>Do not feed output from
oscillators directly to the Elk Pi board.</strong></p>
<p>If you desire to build an Eurorack module based on the Elk Pi with audio
input and output, you will need to make sure to attenuate the input
signal before feeding it to the board, (for example with an attenuator
module). The line level output might sound a bit weak in a eurorack
system, but this is less concerning since it is likely to find source of
gain in your signal path (in the worst case, from your output module).</p>
</div>
<div class="section" id="mini-jack-input">
<h2>Mini-jack input<a class="headerlink" href="#mini-jack-input" title="Permalink to this headline">¶</a></h2>
<p>A 3.5 mm stereo jack input (J13) is present on the board. This is
directly connected to input channels 1 (RING) and 2 (TIP). The same two
inputs are also reported on the pin headers like the rest of the
channels. The function of the jack is to be able to get some signals
into the board without having to design a hat for the Elk Pi, which is
required to access most of the I/O on the board. Since channel 1 and 2
of the board goes through the preamp, it is also possible to connect an
instrument-level signal into it, using a mini-jack to mono jack
splitter.</p>
</div>
<div class="section" id="stereo-preamp">
<h2>Stereo Preamp<a class="headerlink" href="#stereo-preamp" title="Permalink to this headline">¶</a></h2>
<p>The board has a two-channel preamp with a fixed gain of +10dB (3.16
times). <strong>The preamp is only available on channels 1 and 2 and it can be
activated or deactivated through the mode switch J14,</strong> in the same
fashion of the CV/Audio mode switch explained earlier. Note that in this
case, differently from theCV/Audio switch mechanism, if the header is
left open (without dual jumper plugged) the preamp is activated. Also in
this case a bad connection is established when the dual jumper is not
properly oriented, refer to Figure 10 for good connections examples.</p>
<p><em>Figure 10:</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first"><a class="reference internal" href="../_images/image20.jpg"><img alt="image12" src="../_images/image20.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>+0dB Selected</em></div></blockquote>
</td>
<td><p class="first"><a class="reference internal" href="../_images/image24.jpg"><img alt="image13" src="../_images/image24.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>+10dB Selected</em></div></blockquote>
</td>
<td><p class="first"><a class="reference internal" href="../_images/image19.jpg"><img alt="image11" src="../_images/image19.jpg" style="width: 200px;" /></a></p>
<blockquote class="last">
<div><em>+10dB Selected</em></div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>For normal line-level input signals, the preamp amplification is most
likely not needed, so you may want to configure J14 on 0dB mode if you
are feeding a line-level signal, otherwise, clipping might occur.</p>
<p>If you are feeding an instrument-level signal (coming from a guitar or
bass for example) you definitely want to switch J14 on +10dB mode, to
boost the input.</p>
<p>Note: when the preamp is +0dB mode, the audio level of ch. 1 and 2 is
approximately 0.3dB higher with respect audio channel 3, 4, 5 and 6, due
to its high impedance.</p>
</div>
<div class="section" id="headphones-output">
<h2>Headphones output<a class="headerlink" href="#headphones-output" title="Permalink to this headline">¶</a></h2>
<p>The output channel 1 and 2 of the Codec are also available on the
headphone jack J5 (L = Ch 1, R = Ch2).</p>
<p>Max output power to each channel:</p>
<blockquote>
<div><p>150 mW &#64; 16 Ω</p>
<p>90 mW &#64; 32 Ω</p>
<p>50 mW &#64; 64 Ω</p>
</div></blockquote>
<p>Since the headphone and line-out share the same output filter from the
codec, the input signal into the headphone amplifier might be affected
by the heavy loads connected to the line-out jack. Be aware that by
short-circuiting the right channel (by using mono 6.3 mm to RCA plug for
example) the right channel will be muted on the headphones. You can
adjust the volume of the headphone output by means of the rotary
potentiometer R50. The volume is increased with a clockwise rotation.</p>
</div>
</div>
<div class="section" id="analog-and-digital-gpios">
<h1>Analog and Digital GPIOs<a class="headerlink" href="#analog-and-digital-gpios" title="Permalink to this headline">¶</a></h1>
<div class="section" id="digital-io">
<h2>Digital IO<a class="headerlink" href="#digital-io" title="Permalink to this headline">¶</a></h2>
<p>Digital IO is based on shift registers. Namely 74HC165 for input and
74HC595 for output. Logic level for both is 3.3V and exceeding it will
damage the whole GPIO subsystem permanently since the shift registers
are daisy chained. The inputs do not have any pullup- or pulldown
resistors! All inputs are captured simultaneously by toggling the
parallel load input of all input shift registers. Similarly all outputs
are written concurrently on the rising edge of the storage register
clock input.</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input type</td>
<td>3.3V CMOS (without pull-up or pull-down resistors)</td>
</tr>
<tr class="row-even"><td>Input logic high level</td>
<td>&gt;1.5 V</td>
</tr>
<tr class="row-odd"><td>Input logic low level</td>
<td>&lt;0.5 V</td>
</tr>
<tr class="row-even"><td>Output type</td>
<td>3.3V CMOS (push &amp; pull)</td>
</tr>
<tr class="row-odd"><td>Max sink &amp; source current per output</td>
<td>4 mA</td>
</tr>
<tr class="row-even"><td>Read/Write frequency</td>
<td>Max 1 kHz (depends on SW configuration)</td>
</tr>
</tbody>
</table>
<p>32 Digital inputs (DIx) and 32 Digital outputs (DOx) are available on
the 40-pins male connectors J3 and J4 (refer to pinout). They shall be
used to connect buttons, switches, rotary encoders, rotary switches,
LEDs, LED rings, etc..</p>
</div>
<div class="section" id="analog-inputs">
<h2>Analog Inputs<a class="headerlink" href="#analog-inputs" title="Permalink to this headline">¶</a></h2>
<p>The analog inputs are based on one single channel 10-bit analog to
digital converter ADS70411 and an analog multiplexer 74HC4067. The
multiplexer is controlled by a single shift register that shares the
same SPI bus as digital GPIO but has dedicated storage register input
from the MCU. Only one channel can be read simultaneously by enabling
certain multiplexer and selecting desired channel.</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input voltage range relative to GND</td>
<td>0V - 3.3V</td>
</tr>
<tr class="row-even"><td>Input impedance</td>
<td>600 kΩ</td>
</tr>
<tr class="row-odd"><td>Sampling frequency</td>
<td>Max 1 kHz (depends on SW configuration)</td>
</tr>
</tbody>
</table>
<p>16 Analog inputs are (Ax) are available on the 26-pins male connector J6
(refer to pinout). They shall be used to connect potentiometers, sliders
and sensors.</p>
</div>
<div class="section" id="connection-guidelines-for-gpio-peripherals">
<h2>Connection guidelines for GPIO peripherals<a class="headerlink" href="#connection-guidelines-for-gpio-peripherals" title="Permalink to this headline">¶</a></h2>
<p>Inputs and outputs of multi-pin peripheral device must be sequential
for the ease of software development. A perfect example would be
individual bits of an LED-ring situated around a rotary encoder.
The LEDs in this case should be connected to DO0…DOn in a way
that DO0 connects the first and DOn the last LED in the ring.
While it is not mandatory to start from DO0, it is very important
to keep outputs sequential. If multiple LED rings are
multiplexed, the common control signal of individual rings should
be also kept sequential and placed at the start or to the end of
the LED control pins.</p>
<p>The pins <strong>3V3A</strong> and <strong>3V3D</strong> shall be used as supply source for,
respectively, <strong>analog</strong> inputs and <strong>digital</strong> I/O.</p>
<p><strong>All the GPIOs are 3.3V compatible (not 5V compatible)</strong>.</p>
<p>Current sink and source from digital outputs should be kept lower than 4 mA per pin.</p>
<p>Use as reference the examples illustrated in the diagram below:</p>
<p><img alt="image14" src="../_images/image15.png" /></p>
</div>
</div>
<div class="section" id="cv-gate-i-o">
<h1>CV &amp; GATE I/O<a class="headerlink" href="#cv-gate-i-o" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cv-i-o">
<h2>CV I/O<a class="headerlink" href="#cv-i-o" title="Permalink to this headline">¶</a></h2>
<p>Up to two CV inputs and four CV outputs are available on the board
(refer to <em>Figure 4</em> to understand the possible configurations). The CV
signals are processed using the same codec used for the audio. Note that
the Input HPF of the last two input channels of the codec are
deactivated by default to make the CV processing possible. The CV inputs
signals are sampled at the same frequency of the audio (48kHz), but they
are downsampled in software, so the effective sampling rate depends on
the buffer size. CV inputs that exceed the input range are clipped.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input dynamic range:</td>
<td>-5 : +5 V</td>
</tr>
<tr class="row-even"><td>Input impedance</td>
<td>122 kΩ</td>
</tr>
<tr class="row-odd"><td>Input polarity</td>
<td>Inverting <a class="footnote-reference" href="#id7" id="id6">[3]</a></td>
</tr>
<tr class="row-even"><td>CV Sampling frequency :</td>
<td>48 kHz/buffer size (depends on SW configuration)</td>
</tr>
<tr class="row-odd"><td>Output dynamic range:</td>
<td>0 : 10 V</td>
</tr>
<tr class="row-even"><td>Output impedance</td>
<td>47 Ω</td>
</tr>
<tr class="row-odd"><td>Output polarity:</td>
<td>Non Inverting</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[3]</a></td><td>Electrically it is an Inverting input, but the signal is corrected in SW
to be non inverting.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="gate-i-o">
<h2>GATE I/O<a class="headerlink" href="#gate-i-o" title="Permalink to this headline">¶</a></h2>
<p>Two gate inputs and four gate outputs are available on the board. The
input stage is inverting and is based on a transistor high-side switch
linked directly to a Raspberry Pi GPIO. The outputs are not inverting
and generated from four different Raspberry Pi GPIO and a series CMOS
buffer. Note that the gate IO pins can be also used as a trigger or
clock IOs, depending on the software configuration.</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="47%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input High voltage range</td>
<td>&gt;= 0.8 V</td>
</tr>
<tr class="row-even"><td>Input Low voltage range</td>
<td>&lt; 0.7 V</td>
</tr>
<tr class="row-odd"><td>Input Sampling frequency</td>
<td>Depends on buffer size</td>
</tr>
<tr class="row-even"><td>Input polarity</td>
<td>Inverting <a class="footnote-reference" href="#id9" id="id8">[4]</a></td>
</tr>
<tr class="row-odd"><td>Output “High” voltage</td>
<td>5V</td>
</tr>
<tr class="row-even"><td>Output “Low” voltage</td>
<td>0V</td>
</tr>
<tr class="row-odd"><td>Max output source current</td>
<td>6 mA</td>
</tr>
<tr class="row-even"><td>Output polarity</td>
<td>Non inverting</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[4]</a></td><td>Electrically it is an Inverting input, but the signal is corrected in SW
to be non inverting.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="uart-interface">
<h1>UART interface<a class="headerlink" href="#uart-interface" title="Permalink to this headline">¶</a></h1>
<p>The UART interface can be accessed using the pins 32, 34, 36, 38, 39 of
J4 (Figure 11), that are labeled as “MIDI” since they are the same pins
that can be used to connect the MIDI 5 Poles DIN connectors. For this
reason the UART cannot be used if the dedicated pins are connected to
the MIDI DIN connectors.</p>
<p><em>Figure 11:</em></p>
<p><img alt="image15" src="../_images/image6.jpg" /></p>
<p>As you can see from Figure 11, to use the UART you must short (with a
female to female jumper) pin [36] and pin [32]. Pin [38] will be UART TX
and pin [34] will be UART RX. Figure 11 illustrates how to connect the
Elk Pi to your computer with a TTL to USB connector (FTDI).</p>
<p><em>Figure 12:</em></p>
<p><img alt="image100" src="../_images/image100.jpg" /></p>
</div>
<div class="section" id="midi-din-i-o">
<h1>MIDI DIN I/O<a class="headerlink" href="#midi-din-i-o" title="Permalink to this headline">¶</a></h1>
<p>Elk Pi has Optocoupled MIDI IN and MIDI OUT built in, so it is possible
to interface it with 5 pins DIN connectors. You might want to do this
when you will build your own User interface to plug on top of the Elk
Pi. The MIDI signal can be found on the connector J9 (refer to Figure 12
and Figure 5). On the following table you can see some guidelines on how
to make the connections:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="20%" />
<col width="20%" />
<col width="41%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td><strong>Pin on J4</strong></td>
<td><strong>Pin Label</strong></td>
<td><strong>Pin on DIN socket</strong></td>
</tr>
<tr class="row-even"><td><strong>MIDI IN</strong></td>
<td>32</td>
<td>MIDI IN 4</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>34</td>
<td>MIDI IN 5</td>
<td>5</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>31/33/39…</td>
<td>GND</td>
<td>2</td>
</tr>
<tr class="row-odd"><td><strong>MIDI OUT</strong></td>
<td>36</td>
<td>MIDI OUT 4</td>
<td>4</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>38</td>
<td>MIDI OUT 5</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>31/33/39…</td>
<td>GND</td>
<td>2</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../_images/image12.png"><img alt="image16" src="../_images/image12.png" style="width: 200px;" /></a></p>
</div>
<div class="section" id="board-dimensions">
<h1>Board dimensions<a class="headerlink" href="#board-dimensions" title="Permalink to this headline">¶</a></h1>
<p><img alt="image17" src="../_images/image11.jpg" /></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#assembly-content-and-accessories">Assembly content and accessories</a></li>
<li><a class="reference internal" href="#raspberry-pi-guidelines">Raspberry Pi guidelines</a></li>
<li><a class="reference internal" href="#connectors-and-pinout">Connectors and pinout</a></li>
<li><a class="reference internal" href="#status-leds">Status LEDs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#power-requirements">Power requirements</a><ul>
<li><a class="reference internal" href="#recommended-power-supply">Recommended Power Supply</a></li>
<li><a class="reference internal" href="#power-consumption">Power Consumption</a></li>
<li><a class="reference internal" href="#alternative-power-supply">Alternative Power Supply</a></li>
</ul>
</li>
<li><a class="reference internal" href="#audio-cv-configurations">Audio/CV configurations</a></li>
<li><a class="reference internal" href="#audio-i-o">Audio I/O</a><ul>
<li><a class="reference internal" href="#eurorack-compatibility">Eurorack Compatibility</a></li>
<li><a class="reference internal" href="#mini-jack-input">Mini-jack input</a></li>
<li><a class="reference internal" href="#stereo-preamp">Stereo Preamp</a></li>
<li><a class="reference internal" href="#headphones-output">Headphones output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#analog-and-digital-gpios">Analog and Digital GPIOs</a><ul>
<li><a class="reference internal" href="#digital-io">Digital IO</a></li>
<li><a class="reference internal" href="#analog-inputs">Analog Inputs</a></li>
<li><a class="reference internal" href="#connection-guidelines-for-gpio-peripherals">Connection guidelines for GPIO peripherals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cv-gate-i-o">CV &amp; GATE I/O</a><ul>
<li><a class="reference internal" href="#cv-i-o">CV I/O</a></li>
<li><a class="reference internal" href="#gate-i-o">GATE I/O</a></li>
</ul>
</li>
<li><a class="reference internal" href="#uart-interface">UART interface</a></li>
<li><a class="reference internal" href="#midi-din-i-o">MIDI DIN I/O</a></li>
<li><a class="reference internal" href="#board-dimensions">Board dimensions</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="elk_examples_overview.html"
                        title="previous chapter">Examples Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="blackboard.html"
                        title="next chapter">Blackboard Page</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/documents/elk_pi_datasheet.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="blackboard.html" title="Blackboard Page"
             >next</a> |</li>
        <li class="right" >
          <a href="elk_examples_overview.html" title="Examples Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Elk DevKit  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Elk.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>